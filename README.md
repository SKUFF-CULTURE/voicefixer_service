# VoiceFixerService

**VoiceFixerService** — микросервис для обработки и улучшения качества ретро-аудиозаписей. Используя  (`demucs`) и восстановления звука (`voicefixer`), сервис удаляет шумы, артефакты и повышает чёткость вокала в старых аудиофайлах. 

## Основные возможности

- **Разделение аудиодорожек**: Изоляция вокала, инструментов и других компонентов с помощью `demucs`.
- **Улучшение качества звука**: Устранение шума и восстановление утраченных частот с использованием `voicefixer`.
- **Поддержка форматов**: Обработка MP3, WAV, FLAC и других популярных аудиоформатов.
- **GPU-ускорение**: Оптимизировано для работы с NVIDIA GPU через Docker.

## Технологический стек

- **Язык**: Python 3.11
- **Библиотеки**:
  - `demucs`: Разделение аудиодорожек на основе глубокого обучения.
  - `voicefixer`: Улучшение качества звука и речи.
  - `PyTorch`: Поддержка моделей машинного обучения.
  - `ffmpeg`: Работа с аудио
- **Развертывание**: Docker с поддержкой GPU.
- **Форматы ввода/вывода**: MP3, WAV, FLAC.
- **Коммуникация**: Kafka

## Архитектура

Микросервис включает следующий пайплайн [pipeline.py](pipeline.py):

1. **Конвертация**: [convertor](convertor.py)
2. **Интеллектуальное подавление шумов**: [noisereduce_processing](noisereduce_processing.py)
3. **Разделение аудио на компоненты с помощью `demucs`**: [demucs_processing.py](demucs_processing.py)
4. **Улучшение качества звука через `voicefixer`**: [fixer_processing](fixer_processing.py)
5. **Сведение обработанных дорожек и экспорт результата.**: [mixer_processing](mixer_processing_legacy.py)

## Требования

- Docker
- NVIDIA GPU с установленным CUDA и Docker NVIDIA Container Toolkit (учтено в Docker)

### Сборка и запуск

1. Соберите Docker-образ:
   ```bash
   make build
   ```
   Это создаст образ с именем `voicefixer`.

2. Запустите контейнер:
   ```bash
   make run
   ```
